# Attila新技术蓝图

## 概要

随着区块链技术的不断发展，Attila一直紧跟行业步伐。我们致力于提供一个开放的算法治理的分布式系统，以此来为链上应用提供强有力的支持。我们的深入研究有关密码学与共识机制，在这个重要的时刻来临之前，让我们一起展望Attila未来将会如何发展。

- 神经网络模型

  `我们为底层计算机节点之间的交互设计了一套完备的模型。组件网络看起来有一些像搭建积木，底层是基于硬件节点的独立数据中心。这些节点机器组合起来创建元网。Attila 采用新型的神经网络系统 (NNS)，负责控制、和管理网络的结构与功能，数据中心通过向NNS申请加入网络。NNS负责网络权限的管理与建设，为新加入的节点授予令牌。这有点像互联网上的域名系统，它为那些想要加入 Attila 网络的节点提供身份证明。NNS 还负责监管节点，在它们出现性能问题或者错误的时候即时更新网络拓扑结构，为网络提供额外的健壮性保证。NNS 在Token 经济中也扮演着至关重要的角色，NNS 生成的治理 Token(dATT)，来奖励运行数据中心和参与治理的节点。智能合约开发者和使用者在使用网络中的底层组件时，需要向数据中心和 NNS 节点支付 ATT 或者 dATT，其中一部分会被燃烧掉。这个机制会让整个系统的经济保持稳定。`

- 元网

  `元网是组成NNS的基本模块，NNS通过将来自不同数据中心的节点机器控制拟合在一起成为元网。这些节点机器通过 Attila 协议进行协作，以便同步与它们托管的软件容器相关的数据和计算。Attila 协议够使用拜占庭容错技术和密码学来确保子网是防篡改和不可逆的。尽管元网是整个 Attila 网络的基本构建块，但它们对用户和智能合约无感的，用户和智能合约只需知道容器的 ID 即可调用其公开的函数。这种无感是互联网基本设计原则的延伸。在互联网上，如果用户想要连接到某些软件，他们只需要知道运行该软件的机器的IP地址和该软件正在侦听的 TCP 端口。在 Attila 网络中，如果用户想要调用一个函数，他们只需要知道容器的 ID 和函数签名。Attila 为软件创建了一个无缝的世界，任何获得许可的软件都可以直接调用任何其他软件，而无需关注网络的底层工作原理。Attila 协议还以其他方式确保子网的透明性。例如，NNS 可以拆分和合并元网，以平衡整个网络的负载，这对于托管的容器也是透明的。当开发者部署智能合约时，必须选择特定的元网类型，例如“数据”、“系统”或“治理”。每个元网类型为开发者的智能合约提供特定的属性和功能。如果合约托管在数据子网上，它可以处理调用，但不能调用其他合约。而一个系统元网则可以调用其它合约。如果要让合约能够将持有的 ATT 或 dATT 代币送到其他合约，您将需要一个治理元网。所以，治理合约只能部署在治理元网上。元网的功能区分有助于增强底层的容错性，同时也能让开发者专注于特定的目标。`

- 容器

  `容器托管在元网之上。容器的运行受到极细粒度的监控，并通过公开的 API 进行交互。容器内部是由字节码和存储字节码的内存页面组成。字节码通常是通过编译某种语言得到（如 Go 或者 Python）。字节码运行在容器之中，使开发人员可以轻松地通过 API 与之交互。在 ATT 网络中，容器提供的接口包含两种：查询接口和更新接口。它们的本质区别在于，当调用更新接口时，它对容器内存中的数据做的任何更改都将保留；而如果调用一个查询函数，则它对数据所做的任何更改都将在运行后被丢弃。更新调用后数据将在 ATT 网络的协调下持久化到链上。调用将在全局调用一致的顺序下进行，使用允许在完全确定性执行环境中并发执行的机制，更新调用仅需两秒即可完成。另一方面，查询调用不会持久化更改。他们对内存所做的任何更改在运行后都会被丢弃。它们非常高效并且价格低廉，只需几毫秒即可完成，这是因为它们不会在子网中的所有节点上运行。`

- 扩展性

  `传统互联网的扩容方案通常是横向扩展，例如创建容器的大量副本，然后将用户内容分片到不同的容器中。不幸的是，由于种种原因，这种架构过于简单。确实，每个额外的容器都会增加整体的内存容量、更新和查询调用吞吐量。但是我们无法为特定用户的内容扩展查询调用请求。每当我们通过添加更多容器分片来增加系统容量时，我们还需要重新平衡用户内容，这并不是一个很好的边缘计算架构。也没有办法让用户请求到最近的容器。所以，我们将同时需要前端和后端容器。ATT 提供了一些有用的功能，用于将用户连接到前端容器。其中一种方法就是通过 NNS 将域名映射到多个前端容器。当最终用户希望解析这样的域名时，NNS 会查看托管前端容器的所有元网中的副本节点，并返回最接近的副本节点的 IP 地址。样用户就能在附近的副本上执行查询、更新，减少网络延迟大大提高用户体验，而无需内容分发网络。`
